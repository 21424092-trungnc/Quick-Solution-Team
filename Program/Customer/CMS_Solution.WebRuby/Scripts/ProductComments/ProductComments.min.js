var ProductComments=function(n){for(var t in n)this[t]=n[t];return this.Initialize(n)};ProductComments.prototype={Initialize:function(){this.RegisterEvent()},RegisterEvent:function(){$("#btnSave").unbind("click").click(function(){if(Common.ProductComments.validatorForm("#form-ProductComments"),$("#form-ProductComments").find(".field-validation-error").length===0){var n=$("#form-ProductComments").serialize();Common.ShowLoading(!0);Common.Ajax({url:Common.ProductComments.Url.SendComment,type:"POST",ContentType:"application/json; charset=utf-8",async:!1,cache:!1,dataType:"html",data:n},function(n){Common.ShowLoading(!1);Common.Empty(n)?toastr.error("Gửi bình luận thất bại.!!!","Thông báo",{timeOut:2e3,progressBar:!0,closeButton:!0}):(toastr.success("Gửi bình luận thành công.!!!","Thông báo",{timeOut:2e3,progressBar:!0,closeButton:!0}),$("#form-ProductComments").find("input[type=text], textarea").val(""),$("#form-ProductComments").find("input[type=radio]").removeAttr("checked"),$("#comment-product").html(n))})}return!1})},Send:function(n,t=""){if(t.trim()!==""&&$("#"+t.trim()).removeClass("hidden"),Common.ProductComments.validatorForm("form[name=form-SendComments]"),$("form[name=form-SendComments]").find(".field-validation-error").length===0){var i=$("form[name=form-SendComments]").serialize();Common.ShowLoading(!0);Common.Ajax({url:Common.ProductComments.Url.SendComment,type:"POST",ContentType:"application/json; charset=utf-8",async:!1,cache:!1,dataType:"html",data:i},function(n){Common.ShowLoading(!1);Common.Empty(n)?toastr.error("Gửi bình luận thất bại.!!!","Thông báo",{timeOut:2e3,progressBar:!0,closeButton:!0}):(toastr.success("Gửi bình luận thành công.!!!","Thông báo",{timeOut:2e3,progressBar:!0,closeButton:!0}),$("form[name=form-SendComments]").find("input[type=text], textarea").val(""),$("form[name=form-SendComments]").find("input[type=radio]").removeAttr("checked"),$("#comment-product").html(n))})}return!1},Reply:function(n,t,i){$("a[name=replyComment]").removeClass("hidden");$("form[name=form-SendComments]").remove();$("#"+$(n).attr("id")).addClass("hidden");let r='<form role="form" name="form-SendComments">';r+='<section class="top-review">';r+='        <div class="col-md-3"><\/div>';r+='        <div class="col-md-9">';r+="           <div>Để lại bình luận của bạn<\/div>";r+='  <input id="CommentReplyId" name="CommentReplyId" type="hidden" value="'+t+'">';r+='  <input id="ProductId" name="ProductId" type="hidden" value="'+i+'">';r+='           <section class="row">';r+='                <div class="col-md-12">';r+='                    <textarea style="width:100% !important" cols="20" data-msg-required="Vui lòng nhập nội dung!!!" data-rule-required="true" id="ContentComment" maxlength="4000" name="ContentComment" placeholder="Nội dung" rows="2"><\/textarea>';r+="                <\/div>";r+='                <div class="col-md-6">';r+='                   <input style="width:100% !important"  data-msg-required="Vui lòng nhập họ tên!!!" data-rule-required="true" id="FullName" maxlength="250" name="FullName" placeholder="Họ tên" type="text" value="">';r+="           <\/div>";r+='                   <div class="col-md-6">';r+='                       <input style="width:100% !important"  data-msg-email="Vui lòng nhập email đúng định dạng!!!" data-msg-required="Vui lòng nhập email!!!" data-rule-email="true" data-rule-required="true" id="Email" maxlength="250" name="Email" placeholder="Email" type="text" value="">';r+="            <\/div>";r+="        <\/section>";r+='                   <section class="clearfix"><\/section>';r+='                   <button type="button" id="btnSave" onclick="Common.ProductComments.Send(this,\''+$(n).attr("id")+"')\">Gửi<\/button>";r+="               <\/div>";r+="            <\/section>";r+="<\/form>";$(n).closest(".comment").append(r)},validatorForm:n=>{document.querySelectorAll(n+" .field-validation-error").forEach(function(n){let t=n.parentNode;t.parentNode.removeChild(t)}),document.querySelectorAll(n+' input[type="text"][data-rule-required],'+n+' textarea[data-rule-required="true"]').forEach(function(n){if(Common.Empty(n.value)&&Common.Empty(n.getAttribute("disabled"))){let t=document.createElement("section");t.innerHTML='<section class="clearfix"><\/section><div class="field-validation-error alert alert-danger fade show" role="alert" style="display: block;">'+n.getAttribute("data-msg-required")+"<\/div>";const i=n.parentNode;i.insertBefore(t,n.nextSibling)}}),document.querySelectorAll(n+' input[type="text"][data-rule-email]').forEach(function(n){if(!Common.Empty(n.value)&&!/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(n.value)&&Common.Empty(n.getAttribute("disabled"))){let t=document.createElement("section");t.innerHTML='<section class="clearfix"><\/section><div class="field-validation-error alert alert-danger fade show" role="alert" style="display: block;">'+n.getAttribute("data-msg-required")+"<\/div>";const i=n.parentNode;i.insertBefore(t,n.nextSibling)}}),document.querySelectorAll(n+' input[type="file"][data-rule-required]').forEach(function(n){if(Common.Empty(n.value)){let t=document.createElement("section");t.innerHTML='<section class="clearfix"><\/section><div class="field-validation-error alert alert-danger fade show" role="alert" style="display: block;">'+n.getAttribute("data-msg-required")+"<\/div>";const i=n.parentNode;i.insertBefore(t,n.nextSibling)}})}};