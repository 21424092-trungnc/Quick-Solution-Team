var ThemContactUs=function(n){for(var t in n)this[t]=n[t];return this.Initialize(n)};ThemContactUs.prototype={Initialize:function(){this.RegisterEvent()},RegisterEvent:function(){this.IsPaging=!1;var n=this;$("button[name='btn_Send']").unbind("click").click(function(){Common.ThemContactUs.Send()})},Send:function(){if(Common.ThemContactUs.validatorForm("#form-AddContactUs"),$("#form-AddContactUs").find(".field-validation-error").length==0){var t={TopicId:$("#txt_toppic option:selected").val(),FullName:$("input[name='txt_name']").val(),PhoneNumber:$.trim($("input[name='txt_phone']").val()),Email:$.trim($("input[name='txt_mail']").val()),ContentSupport:$.trim($("textarea[name='txt_content']").val()),IsActive:!0,IsDeleted:!1},n=new FormData;n.append("modelThongTin",JSON.stringify(t));Common.Ajax({type:"POST",url:Common.ThemContactUs.Url.Send,"async":!1,cache:!1,datatype:"json",contentType:!1,processData:!1,data:n},function(n){if(!Common.Empty(n))if(n.status==!0){toastr.success("Gửi liên hệ thành công!","Thông báo",{timeOut:1e3,progressBar:!0,closeButton:!0});let n=$("button[name='btn_Send']").data("url");setTimeout(()=>{window.location=window.location.origin+n},1500)}else toastr.error("Gửi liên hệ không thành công!","Thông báo",{timeOut:2e3,progressBar:!0,closeButton:!0})})}},validatorForm:n=>{document.querySelectorAll(n+" .field-validation-error").forEach(function(n){n.remove(n)}),document.querySelectorAll(n+' input[type="text"][data-rule-required],'+n+' textarea[data-rule-required="true"],'+n+' select[data-rule-required="true"]').forEach(function(n){if(Common.Empty(n.value)&&Common.Empty(n.getAttribute("disabled"))){var t='<div class="field-validation-error alert alert-danger fade show" role="alert" style="display: block;;width:100%;text-align: left;">'+n.getAttribute("data-msg-required")+"<\/div>";n.insertAdjacentHTML("afterend",t)}}),document.querySelectorAll(n+' input[type="text"][data-rule-required],'+n+' textarea[data-rule-required="true"],'+n+' select[data-rule-required="true"]').forEach(function(n){if(!Common.Empty(n.value)&&(/<[a-z][\s\S]*>/i.test(n.value)||/<[/s/S][a-z][\s\S]*>/i.test(n.value)))n.insertAdjacentHTML("afterend",'<div class="field-validation-error alert alert-danger fade show" role="alert" style="display: block; width:100%;text-align: left;">Không được chứa mã HTML!!!<\/div>')}),document.querySelectorAll(n+' input[type="text"][data-rule-required],'+n+' textarea[data-rule-required="true"],'+n+' select[data-rule-required="true"]').forEach(function(n){if(!Common.Empty(n.value)&&Common.Empty(Common.RemoveScript(n.value)))n.insertAdjacentHTML("afterend",'<div class="field-validation-error alert alert-danger fade show" role="alert" style="display: block; width:100%;text-align: left;">Không có đoạn Javascript không hợp lệ !!!<\/div>')}),document.querySelectorAll(n+' input[type="text"][data-rule-email]').forEach(function(n){if(!Common.Empty(n.value)&&!/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(n.value)&&Common.Empty(n.getAttribute("disabled"))){var t='<div class="field-validation-error alert alert-danger fade show" role="alert" style="display: block; width:100%;text-align: left;">'+n.getAttribute("data-msg-email")+"<\/div>";n.insertAdjacentHTML("afterend",t)}}),document.querySelectorAll(n+' input[type="file"][data-rule-required]').forEach(function(n){if(Common.Empty(n.value)){var t='<div class="field-validation-error alert alert-danger fade show" role="alert" style="display: block; width:100%;text-align: left;">'+n.getAttribute("data-msg-required")+"<\/div>";n.insertAdjacentHTML("afterend",t)}})}};