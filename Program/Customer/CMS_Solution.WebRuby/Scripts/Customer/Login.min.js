var Login = function (e) { for (var t in e) this[t] = e[t]; return this.Initialize(e) }; Login.prototype = { Initialize: function (e) { this.LoginEvent() }, LoginEvent: function () { this.IsPaging = !1, $("#btn-login").unbind("click").click(function () { return Common.Login.validatorForm("#form-Login"), 0 == $("#form-Login").find(".field-validation-error").length && $("#form-Login").unbind("submit").submit(), !1 }) }, getUserInfoFB(e) { FB.api("/me", { fields: "id,email,name,gender", access_token: e }, function (e) { let t = { FacebookID: e.id, Email: e.email, FullName: e.name, Gender: e.gender }; Common.Login.ssoLogin(t) }) }, getUserInfoGG(e) { let t = e.getBasicProfile(), i = { GoogleID: t.getId(), FullName: t.getFamilyName() + (t.getGivenName() ? " " + t.getGivenName() : ""), Email: t.getEmail() }; Common.Login.ssoLogin(i) }, ssoLogin(e) { Common.ShowLoading(!0), Common.Ajax({ url: Common.Login.Url.LoginAccountSSO, type: "POST", ContentType: "application/json; charset=utf-8", async: !1, cache: !1, dataType: "JSON", data: e }, function (e) { Common.ShowLoading(!1), Common.Empty(e) ? toastr.error("Đăng nhập thất bại.!!!", "Th\xf4ng b\xe1o", { timeOut: 2e3, progressBar: !0, closeButton: !0 }) : window.location = e.url }) }, validatorForm(e) { document.querySelectorAll(e + " .field-validation-error").forEach(function (e, t) { let i = e.parentNode; i.parentNode.removeChild(i) }), document.querySelectorAll(e + ' input[type="text"][data-rule-required],' + e + ' textarea[data-rule-required="true"]').forEach(function (e, t) { if (Common.Empty(e.value) && Common.Empty(e.getAttribute("disabled"))) { let i = document.createElement("section"); i.innerHTML = '<section class="clearfix"></section><div class="field-validation-error alert alert-danger fade show" role="alert" style="display: block;">' + e.getAttribute("data-msg-required") + "</div>"; let r = e.parentNode; r.insertBefore(i, e.nextSibling) } }), document.querySelectorAll(e + ' input[type="password"][data-rule-required],' + e + ' textarea[data-rule-required="true"]').forEach(function (e, t) { if (Common.Empty(e.value) && Common.Empty(e.getAttribute("disabled"))) { let i = document.createElement("section"); i.innerHTML = '<section class="clearfix"></section><div class="field-validation-error alert alert-danger fade show" role="alert" style="display: block;">' + e.getAttribute("data-msg-required") + "</div>"; let r = e.parentNode; r.insertBefore(i, e.nextSibling) } }) }, ShowMessage: e => (toastr.error(e, "Th\xf4ng b\xe1o", { timeOut: 2e3, progressBar: !0, closeButton: !0 }), !1) };