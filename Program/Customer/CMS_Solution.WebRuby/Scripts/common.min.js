Common=function(){return this.Init()};var elem=document.documentElement;Common.prototype={Init:function(){$(document).ready(function(){String.prototype.format=function(){var n=this,t,r;for(i=0;i<arguments.length;i++)t=arguments[i],r=new RegExp("{["+i+"]}","g"),n=n.replace(r,t);return n}})},Empty:function(n){return n==null||n==undefined||n==""||n.length==0||jQuery.trim(n).length==0?!0:!1},Serialize:function(n){var t=$(n).serialize();return t||(t=$(n).find("input[name],select[name],textarea[name]").serialize()),t},ShowLoading:function(n){n?$(".loadingCommon").show():$(".loadingCommon").hide()},GetDateFormat:function(n){return $.datepicker.formatDate($.datepicker._defaults.dateFormat,n)},RedirectLoginUrl:function(){window.location.href="/Error/Permission"},convertStringToDateTime:function(n){var t=new Date,i=t.getDate(),r=t.getMonth()+1,f=t.getFullYear(),u;return i<10&&(i="0"+i),r<10&&(r="0"+r),t=i+"/"+r+"/"+f,n=!n?t:n.trim(),u=n.split("/"),dateTime=u[2]+"-"+u[1]+"-"+u[0],new Date(dateTime)},DownloadFile:function(n){window.open(n,"_blank")},setDataToObj:(n,t,i)=>{var r=t.split("_"),u;return r.length>1?(Common.Empty(n[r[0]])&&(n[r[0]]={}),u=this.setDataToObj(n[r[0]],r[1],i),n[r[0]]=u):n[t]=i,n},LoadingCount:0,Ajax:function(n,t){return Common.ShowLoading(!0),Common.LoadingCount++,$(".loading").stop().fadeToggle(Common.LoadingCount>0),n=$.extend({type:"POST","async":!0,cache:!1,dataType:"json"},n),$.ajax(n).done(function(n){Common.ShowLoading(!1);t(n)}).fail(function(n,t,i){if(Common.ShowLoading(!1),n)switch(n.status){case 403:alert(n.statusText);window&&window.location&&(window.location.href="/");break;case 500:alert(n);alert(t);alert(i);break;case 401:if(window&&window.location){var r=$.parseJSON(n.responseText);window.location.href=r.LogOnUrl}else $.notify({message:"Bạn không có quyền thực hiện chức năng này.!!!"},{delay:1e3,timer:1e3,type:"danger"})}}).always(function(){Common.LoadingCount--;$(".loading").stop().fadeToggle(Common.LoadingCount>0);Common.ShowLoading(!1)})},ShowLoading:function(n){n?$(".loadingCommon").show():$(".loadingCommon").hide()},createCookie:function(n,t,i){var r=new Date,u=Common.accessCookie(n);u!=""&&(document.cookie=n+"=; expires="+r.toGMTString());r.setTime(r.getTime()+i*864e5);document.cookie=n+"="+t+"; expires="+r.toGMTString()},accessCookie:function(n){for(var t,r=n+"=",u=document.cookie.split(";"),i=0;i<u.length;i++)if(t=u[i].trim(),t.indexOf(r)==0)return t.substring(r.length,t.length);return""},RemoveScript:function(n){return r=n.replace(/(<script(.|\n)*<\/script>)|(&lt;script(.|\n)*&lt;\/script&gt;)/gi,"")},GetDistrictByProvinceID:function(n){Common.ShowLoading(!0);var t=$(n).attr("data-name-select");Common.Ajax({url:"/Common/GetDistrictByProvinceID",type:"POST",ContentType:"application/json; charset=utf-8","async":!1,cache:!1,dataType:"JSON",data:{ProvinceID:$(n).val()}},function(n){var i,u,r,f;if(Common.ShowLoading(!1),n.status==!0){for(i="",u=n.data,r=0;r<u.length;r++)f=u[r],i+='<option value="'+f.DISTRICTID+'">'+f.DISTRICTNAME+"<\/option>";console.log(i);$("#"+t).empty().append(i)}else toastr.error("Đã xảy ra lỗi!","Thông báo",{timeOut:5e3,progressBar:!0,closeButton:!0})})},F_ConvertToNumericVN:function(n,t,i,r,u){var e="\\d(?=(\\d{"+(i||3)+"})+"+(t>0?"\\D":"$")+")",f=n.toFixed(Math.max(0,~~t));return(u?f.replace(".",u):f).replace(new RegExp(e,"g"),"$&"+(r||","))},SumTotal:function(n,t){return n.reduce(function(n,i){return n+i[t]},0)},ShowMessage:(n,t)=>(t=="1"?toastr.success(n,"Thông báo",{timeOut:2e3,progressBar:!0,closeButton:!0}):toastr.error(n,"Thông báo",{timeOut:2e3,progressBar:!0,closeButton:!0}),!1)};this.Common=window.Common=new Common;